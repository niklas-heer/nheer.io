---
interface Props {
  lang: 'en' | 'de';
}

const { lang } = Astro.props;
const currentPath = Astro.url.pathname;

// Calculate the path for the other language
function getAlternatePath(path: string, currentLang: 'en' | 'de'): string {
  if (currentLang === 'en') {
    // Switch to German: add /de prefix
    return `/de${path === '/' ? '' : path}`;
  } else {
    // Switch to English: remove /de prefix
    return path.replace(/^\/de/, '') || '/';
  }
}

const alternatePath = getAlternatePath(currentPath, lang);
const alternateLang = lang === 'en' ? 'de' : 'en';
---

<a
  href={alternatePath}
  class="rounded-md px-2 py-1 text-sm font-medium text-muted hover:text-foreground hover:bg-surface transition-colors uppercase"
  aria-label={`Switch to ${alternateLang === 'de' ? 'German' : 'English'}`}
>
  {alternateLang}
</a>
